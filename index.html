<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no">
  <title>FX Levels</title>
  <meta name="theme-color" content="#0B0B10">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/icon-180.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="stylesheet" href="app.css">
</head>
<body>
  <div class="bg-wall"></div>
  <div class="bg-dim"></div>

  <main class="grid">
    <section class="card">
      <div class="card-head green clickable" id="buyHead">خرید</div>
      <div class="card-body">
        <div class="row"><input id="buyTop"  inputmode="decimal" placeholder=""></div>
        <div class="row"><input id="buyHigh" inputmode="decimal" placeholder=""></div>
        <div class="row"><input id="buyLow"  inputmode="decimal" placeholder=""></div>
        <hr/>
        <div class="row"><div class="badge green-soft full" id="buyP1">—</div></div>
        <div class="row"><div class="badge green-soft full" id="buyP2">—</div></div>
        <div class="row"><div class="badge yellow full" id="buyStop">—</div></div>
      </div>
    </section>

    <section class="card">
      <div class="card-head pink clickable" id="sellHead">فروش</div>
      <div class="card-body">
        <div class="row"><input id="sellTop"  inputmode="decimal" placeholder=""></div>
        <div class="row"><input id="sellHigh" inputmode="decimal" placeholder=""></div>
        <div class="row"><input id="sellLow"  inputmode="decimal" placeholder=""></div>
        <hr/>
        <div class="row"><div class="badge yellow full" id="sellStop">—</div></div>
        <div class="row"><div class="badge red-soft full" id="sellP2">—</div></div>
        <div class="row"><div class="badge red-soft full" id="sellP1">—</div></div>
      </div>
    </section>
  </main>

  <!-- Glass settings -->
  <button class="fab" id="glassFab" aria-label="تنظیم گلس">⚙️</button>
  <section class="sheet" id="glassSheet" aria-hidden="true">
    <div class="sheet-handle"></div>
    <div class="sheet-body">
      <div class="sheet-title">تنظیم شیشه بدنه</div>
      <div class="sheet-row">
        <label>شفافیت</label>
        <input type="range" id="alpha" min="0.06" max="0.28" step="0.01"><span id="alphaVal"></span>
      </div>
      <div class="sheet-row">
        <label>مرز</label>
        <input type="range" id="border" min="0.00" max="0.20" step="0.01"><span id="borderVal"></span>
      </div>
      <div class="sheet-row">
        <label>تاری</label>
        <input type="range" id="blur" min="8" max="30" step="1"><span id="blurVal"></span>
      </div>
      <div class="preset-row">
        <button data-preset="soft">نرم</button>
        <button data-preset="default">پیش‌فرض</button>
        <button data-preset="solid">مات</button>
        <button data-preset="reset">ریست</button>
      </div>
      <div class="hint">تغییرات ذخیره می‌شوند و در اجراهای بعدی هم اعمال می‌گردند.</div>
    </div>
  </section>

  <!-- Share FAB (opens sheet) -->
  <button class="fab share" id="shareFab" aria-label="ارسال به تلگرام">📤</button>

  <!-- Share Bottom Sheet (Text only) -->
  <section class="sheet" id="shareSheet" aria-hidden="true">
    <div class="sheet-handle"></div>
    <div class="sheet-body">
      <div class="sheet-title">ارسال ترید به تلگرام</div>
      <div class="sheet-row" style="grid-template-columns: 1fr;">
        <label>پیش‌نمایش پیام:</label>
        <div id="sharePreview" class="preview"></div>
      </div>
      <div class="preset-row">
        <button id="btnTgBuy">ارسال خرید (تلگرام)</button>
        <button id="btnTgSell">ارسال فروش (تلگرام)</button>
      </div>
      <hr style="opacity:.12;border:none;border-top:1px solid rgba(255,255,255,.18);margin:10px 0;">
      <div class="sheet-title" style="margin-top:0">ارسال مستقیم با ربات (اختیاری)</div>
      <div class="sheet-row" style="grid-template-columns: 160px 1fr;">
        <label>Relay URL</label>
        <input id="relayUrlInput" placeholder="مثال: https://your-worker.workers.dev/send">
      </div>
      <div class="sheet-row" style="grid-template-columns: 160px 1fr;">
        <label>Chat ID</label>
        <input id="chatIdInput" placeholder="-1001234567890">
      </div>
      <div class="preset-row">
        <button id="saveRelay">ذخیره</button>
        <button id="testRelay">تست اتصال</button>
        <button id="btnDirectBuy">ارسال مستقیم خرید</button>
        <button id="btnDirectSell">ارسال مستقیم فروش</button>
      </div>
      <div class="hint">فقط متن ارسال می‌شود (بدون تصویر). برای خرید آیکن 🟢 و برای فروش 🔴 استفاده می‌شود.</div>
    </div>
  </section>

  <!-- Password Gate -->
  <section class="auth" id="authGate" aria-hidden="false">
    <div class="auth-card">
      <div class="auth-title">لطفا لایسنس خود را وارد کنید.</div>
      <input type="password" id="authPass" placeholder="رمز عبور" autocomplete="current-password" inputmode="text">
      <button id="authBtn">ورود</button>
      <div class="auth-error" id="authErr" hidden>رمز اشتباه است.</div>
    </div>
  </section>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => navigator.serviceWorker.register('./service-worker.js'));
    }
  </script>
</body>
</html>
